<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>#Ruby on Rails &#8211; HippoBlog</title>
	<atom:link href="https://blog.hippohack.me/hashtag/rubyonrails/feed" rel="self" type="application/rss+xml" />
	<link>https://blog.hippohack.me</link>
	<description>Web開発に関する備忘録や日々の雑記ブログ</description>
	<lastBuildDate>Sat, 21 Nov 2020 12:29:04 +0000</lastBuildDate>
	<language>ja</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.7.13</generator>

<image>
	<url>https://blog.hippohack.me/_cms/wp-content/uploads/2021/03/image.jpg</url>
	<title>#Ruby on Rails &#8211; HippoBlog</title>
	<link>https://blog.hippohack.me</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">190967550</site>	<item>
		<title>[rails] FactoryBotで、Factory not registered</title>
		<link>https://blog.hippohack.me/web/173</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Sat, 21 Nov 2020 12:28:11 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=173</guid>

					<description><![CDATA[RSpecのテストコードを書いている際、FactoryBot.defineでモデルをNewする際の初期値を決めて楽できるということでかいてみていた際に Factory not registered って怒られた際のログ。 [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>RSpecのテストコードを書いている際、FactoryBot.defineでモデルをNewする際の初期値を決めて楽できるということでかいてみていた際に <code>Factory not registered</code> って怒られた際のログ。</p>
<p>書いてたコード。</p>
<pre><code># spec/factories/categories.rb

FactoryBot.define do
  factory :category do
    name { "category_name" }
    slug { "category_slug" }
  end
end
</code></pre>
<ul>
<li>category_spec.rbファイルを編集。
<ul>
<li><code>category = Category.new(name: "", slug: "fuga")</code> を</li>
<li><code>category = build(:category, name: "")</code> にしたイメージ。</li>
</ul>
</li>
</ul>
<p>テスト実行。</p>
<pre><code># bundle exec rspec spec/models/category_spec.rb
FFF

Failures:

  1) Category name blankの時に invalidになる
     Failure/Error: category = build(:category, name: "")

     KeyError:
       Factory not registered: "category"
</code></pre>
<p><code>Factory not registered: "category"</code> なるエラー。 どうも <code>FactoryBot.define</code> が動作してない。</p>
<p>まぁまぁハマった。</p>
<p>/spec/factories/以下は自動でロードしてくれるっていうしなんだろなーと。</p>
<p>で調べてる中で↓を見つけた。</p>
<ul>
<li><a href="https://stackoverflow.com/questions/17330788/factory-not-registered#17331102">ruby on rails &#8211; Factory not registered &#8211; Stack Overflow</a>
<ul>
<li><code>spec_helper.rb</code>で<code>require 'factory_girl'</code>してるのに目が行った。</li>
<li>バージョン古いがやることはおなじかも？とおもって、</li>
<li><code>rails_helper.rb</code> で <code>require 'factory_bot_rails'</code> してみた。</li>
</ul>
</li>
</ul>
<p><img src="https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34-1024x525.png" alt="img1" width="1024" height="525" class="aligncenter size-large wp-image-174" srcset="https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 1024w, https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 300w, https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 768w, https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 1218w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>で、テスト実行。</p>
<pre><code># bundle exec rspec spec/models/category_spec.rb
...

Finished in 0.10593 seconds (files took 3.21 seconds to load)
3 examples, 0 failures
</code></pre>
<p>いけたー。</p>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">173</post-id>	</item>
		<item>
		<title>[rails] cssでimage_urlが使える</title>
		<link>https://blog.hippohack.me/web/169</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Sat, 29 Feb 2020 21:22:01 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=169</guid>

					<description><![CDATA[hoge.scss .eyecatch { background: image-url("og.png") no-repeat; } いいかんじにコンパイルしてくれるみたい。 参考サイト heroku &#8211; H [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><em class="file-name">hoge.scss</em></p>
<pre><code>.eyecatch {
  background: image-url("og.png") no-repeat;
}
</code></pre>
<p>いいかんじにコンパイルしてくれるみたい。</p>
<h2>参考サイト</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/15257555/how-to-reference-images-in-css-within-rails-4#15591726">heroku &#8211; How to reference images in CSS within Rails 4 &#8211; Stack Overflow</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">169</post-id>	</item>
		<item>
		<title>[rails] formをjsからサブミットではajaxにならない問題の解消</title>
		<link>https://blog.hippohack.me/web/168</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Fri, 28 Feb 2020 21:15:48 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=168</guid>

					<description><![CDATA[テンプレートミッシングとかでだいぶはまった。 ざっくりログ。 form_forに:remote =&#62; trueを設定 submitボタンを設置せず file_fieldの変更監視してform.submit()してた [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>テンプレートミッシングとかでだいぶはまった。</p>
<p>ざっくりログ。</p>
<ul>
<li>form_forに<code>:remote =&gt; true</code>を設定</li>
<li>submitボタンを設置せず</li>
<li>file_fieldの変更監視してform.submit()してたがそれではajaxで処理してくれない。</li>
<li>submitボタンを設置して非表示に</li>
<li>で、$(.submit).click()でsubmitするとajaxで飛んだ。</li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">168</post-id>	</item>
		<item>
		<title>[rails] Delayed Jobで非同期処理</title>
		<link>https://blog.hippohack.me/web/167</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Thu, 27 Feb 2020 21:43:57 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=167</guid>

					<description><![CDATA[個人開発WebアプリのHippoMarksでのキャプチャ画像を取得する処理を非同期で処理すべく、Delayed Jobを使ってみる。 参考 collectiveidea/delayed_job: Database bas [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>個人開発Webアプリの<a href="https://bookmarks.hippohack.me">HippoMarks</a>でのキャプチャ画像を取得する処理を非同期で処理すべく、Delayed Jobを使ってみる。</p>
<ul>
<li>参考
<ul>
<li><a href="https://github.com/collectiveidea/delayed_job/">collectiveidea/delayed_job: Database based asynchronous priority queue system &#8212; Extracted from Shopify</a></li>
</ul>
</li>
</ul>
<h2>準備</h2>
<p><em class="file-name">Gemfile</em></p>
<pre><code>gem 'daemons'
gem 'delayed_job_active_record'
</code></pre>
<p><em class="file-name">bash</em></p>
<pre><code># gem install
bundle install

# make necesarry files
rails g delayed_job:active_record

# make tables
rails db:migrate
</code></pre>
<h2>有効化</h2>
<p><em class="file-name">config/application.rb</em></p>
<pre><code>module Bookmarks
    class Application &lt; Rails::Application
        config.active_job.queue_adapter = :delayed_job
        ︙
    end
end
</code></pre>
<h2>jobの作成</h2>
<pre><code>$ rails g job Capture
Running via Spring preloader in process 2177
      invoke  rspec
      create    spec/jobs/capture_job_spec.rb
      create  app/jobs/capture_job.rb
</code></pre>
<h2>作成されたJobの編集</h2>
<p><em class="file-name">app/job/capture_job.rb</em></p>
<pre><code>class CaptureJob &lt; ApplicationJob
  queue_as :default


  def perform(*args)
    # Do something later
  end
end
</code></pre>
<ul>
<li>実処理をあらわすのは performメソッドの役割</li>
<li>メソッド配下に非同期処理を書く</li>
<li>メソッド内で必要な値は引数で渡す</li>
</ul>
<h2>実行</h2>
<p>ここでは書いてないですが、<code>/config/initializers/delayed_job.rb</code> を作成して設定を変更することが可能。</p>
<p>詳しくはこのへん参考に。</p>
<ul>
<li><a href="https://github.com/collectiveidea/delayed_job/#gory-details">collectiveidea/delayed_job: Database based asynchronous priority queue system &#8212; Extracted from Shopify</a></li>
</ul>
<p><em class="file-name">bash</em></p>
<pre><code># ruby bin/delayed_job start
</code></pre>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">167</post-id>	</item>
		<item>
		<title>[rails] open-uriが404エラーでライズしてしまう問題</title>
		<link>https://blog.hippohack.me/web/164</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Tue, 25 Feb 2020 21:25:31 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=164</guid>

					<description><![CDATA[メソッド定義してそれを呼ぶことにする。 ついでにリダイレクト拒否も追加。 model # doc = Nokogiri::HTML(self.open(url)) doc = Nokogiri::HTML(self.sa [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><img src="https://blog.hippohack.me/_cms/wp-content/uploads/2020/02/BE6B75A9-8F5B-483C-B720-EF8795C5523A.png" alt="enter image description here" /></p>
<p>メソッド定義してそれを呼ぶことにする。</p>
<p>ついでにリダイレクト拒否も追加。</p>
<p><em class="file-name">model</em></p>
<pre><code># doc = Nokogiri::HTML(self.open(url))
doc = Nokogiri::HTML(self.safe_open(url))
</code></pre>
<p><em class="file-name">model</em></p>
<pre><code>def self.safe_open(url)
    begin
        OpenURI.open_uri(url, redirect: false) { |io|
            return io.read
        }
    rescue =&gt; e        
        puts e # 例外メッセージ表示
    end
end
</code></pre>
<h2>参考サイト</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/31975363/how-to-rescue-404s-from-openuri-in-a-map">ruby on rails &#8211; How to rescue 404s from OpenURI in a map &#8211; Stack Overflow</a></li>
<li><a href="https://keruuweb.com/ruby-openuri%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9/">Ruby OpenURIの使い方 | | KeruuWeb</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">164</post-id>	</item>
		<item>
		<title>[rails] OG画像URLスクレイピング・ないときはキャプチャ取る（の作業ログ）</title>
		<link>https://blog.hippohack.me/web/162</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Mon, 24 Feb 2020 21:38:53 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=162</guid>

					<description><![CDATA[OG画像URLスクレイピング Nokogiriでスクレイピング。 og:image だったり、og:image:url だったりするので2重チェックしてる。 で、どっちもないときはキャプチャを取る。 doc = Noko [&#8230;]]]></description>
										<content:encoded><![CDATA[<h2>OG画像URLスクレイピング</h2>
<p>Nokogiriでスクレイピング。</p>
<p><code>og:image</code> だったり、<code>og:image:url</code> だったりするので2重チェックしてる。</p>
<p>で、どっちもないときはキャプチャを取る。</p>
<pre><code>doc = Nokogiri::HTML(open(url))

og_image_url = doc.xpath('/html/head/meta[@property="og:image"]/@content').to_s
og_image_url = doc.xpath('/html/head/meta[@property="og:image:url"]/@content').to_s if og_image_url.blank?
</code></pre>
<h2>キャプチャを取る</h2>
<p>Watir を使う。</p>
<ul>
<li>参考
<ul>
<li><a href="http://watir.com/guides/form-example/">Watir Example &#8211; Form Filling – Watir Project</a></li>
<li><a href="http://watir.com/guides/chrome/#headless">Chrome – Watir Project</a></li>
</ul>
</li>
</ul>
<p><em class="file-name">[Gemfile]</em></p>
<pre><code>gem 'watir'
gem 'headless'
gem 'webdrivers'
gem 'faker'
</code></pre>
<p><code>bundle install</code> する。</p>
<p>Headlessでエラー。</p>
<pre><code>Headless::Exception (Xvfb not found on your system)
</code></pre>
<p>XvfbはLinuxのパッケージらしい。</p>
<p>dockerfileを編集していれる。</p>
<p><em class="file-name">[dockerfile]</em></p>
<pre><code>︙
RUN apt-get update &amp;&amp; apt-get install -y build-essential libpq-dev tmux xvfb
︙
</code></pre>
<p><code>Watir::Browser.new :chrome, headless: true</code> でエラー。</p>
<p><code>Webdrivers::BrowserNotFound (Failed to find Chrome binary.)</code></p>
<pre><code>Selenium::WebDriver::Error::UnknownError (unknown error: Chrome failed to start: exited abnormally)
  (unknown error: DevToolsActivePort file doesn't exist)
  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)
</code></pre>
<p>chromeのバイナリ入れないといけないみたい。</p>
<ul>
<li>参考
<ul>
<li><a href="https://askubuntu.com/questions/510056/how-to-install-google-chrome">software installation &#8211; How to install Google Chrome &#8211; Ask Ubuntu</a></li>
<li><a href="https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/">How to Setup Selenium with ChromeDriver on Ubuntu 18.04 &amp; 16.04 – TecAdmin</a></li>
</ul>
</li>
</ul>
<p><em class="file-name">[dockerfile]</em></p>
<pre><code>︙
# install google-chrome-stable
RUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -RUN echo 'deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main' | tee /etc/apt/sources.list.d/google-chrome.listRUN apt-get update &amp;&amp; apt-get install -y google-chrome-stable

RUN wget https://chromedriver.storage.googleapis.com/2.41/chromedriver_linux64.zip &amp;&amp; unzip chromedriver_linux64.zipRUN mv chromedriver /usr/bin/chromedriver &amp;&amp; chown root:root /usr/bin/chromedriver &amp;&amp; chmod +x /usr/bin/chromedriver
︙
</code></pre>
<p>では、解決せず。</p>
<p>webdriverの使い方ミスってたかも。</p>
<ul>
<li>参考
<ul>
<li><a href="https://github.com/titusfortner/webdrivers">titusfortner/webdrivers: Keep your Selenium WebDrivers updated automatically</a></li>
</ul>
</li>
</ul>
<p>いやー、でも解決せず。</p>
<h3>一旦リセット。Watirを捨てる。</h3>
<p>純粋にselenium-webdriverでいける？</p>
<ul>
<li>参考
<ul>
<li><a href="https://stackoverflow.com/questions/44424200/how-do-i-use-selenium-webdriver-on-headless-chrome">ruby &#8211; How do I use Selenium Webdriver on headless Chrome? &#8211; Stack Overflow</a></li>
</ul>
</li>
</ul>
<p>また、<code>Webdrivers::BrowserNotFound (Failed to find Chrome binary.)</code></p>
<p>↑のdockerfileの修正で<code>google-chrome-stable</code>もっかい入れた。</p>
<pre><code># which google-chrome
/usr/bin/google-chrome
</code></pre>
<p>結果おなじエラー。。</p>
<pre><code>Selenium::WebDriver::Error::UnknownError (unknown error: Chrome failed to start: exited abnormally)
  (unknown error: DevToolsActivePort file doesn't exist)
  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)
</code></pre>
<p>パスの設定覗いてみる</p>
<pre><code>Selenium::WebDriver::Chrome.driver_path
2019-08-29 04:37:05 WARN Selenium [DEPRECATION] Selenium::WebDriver::Chrome#driver_path is deprecated. Use Selenium::WebDriver::Chrome::Service#driver_path instead.
=&gt; #&lt;Proc:0x000055e90596c0a0@/usr/local/bundle/gems/webdrivers-4.1.2/lib/webdrivers/chromedriver.rb:119&gt;
</code></pre>
<p>あんじゃん。んー。。。</p>
<p>chromedriver入れてみる。</p>
<ul>
<li>
<p>参考</p>
<ul>
<li><a href="https://qiita.com/nishina555/items/f08b2a94d9bf03a524b7">Dockerでブラウザテストを実行するための環境構築手順 &#8211; Qiita</a></li>
</ul>
<p>dockerfile: 返り値を変数に入れたい。</p>
</li>
<li>
<p>参考</p>
<ul>
<li><a href="https://www.ted027.com/post/docker-var/">Dockerでコマンド実行結果を変数に入れられなくて困った話 &#8211; 行けたら行く</a></li>
</ul>
</li>
</ul>
<p>だめだ、とりあえずハードコーディング。</p>
<p><em class="file-name">[dockerfile]</em></p>
<pre><code>ENV CHROME_DRIVER_VERSION 76.0.3809.126

# ENV CHROME_DRIVER_VERSION=`curl -sS chromedriver.storage.googleapis.com/LATEST_RELEASE`
RUN wget -N http://chromedriver.storage.googleapis.com/$CHROME_DRIVER_VERSION/chromedriver_linux64.zip

RUN unzip chromedriver_linux64.zip &amp;&amp; rm chromedriver_linux64.zip

RUN mv chromedriver /usr/local/bin/
</code></pre>
<p>確認。</p>
<pre><code># which chromedriver
/usr/local/bin/chromedriver
</code></pre>
<p><em class="file-name">[module]</em></p>
<pre><code>def get_screenshot(url)
  # configure the driver to run in headless mode
  options = Selenium::WebDriver::Chrome::Options.new
  options.add_argument('--headless')
  options.add_argument('--no-sandbox')
  options.add_argument('--disable-gpu')
  driver = Selenium::WebDriver.for :chrome, options: options
  driver.navigate.to url
  # resize the window and take a screenshot
  driver.manage.window.resize_to(372, 248)
  src = 'data:image/png;base64,' + driver.screenshot_as(:base64)
  # driver.save_screenshot "screenshot.png"
  driver.quit
  src
end
</code></pre>
<p>で、いけたー。</p>
<p>けど、 <code>Net::ReadTimeout with #&lt;TCPSocket:(closed)&gt;</code> とか出る。 → 例外処理で回避。</p>
<h3>エラー： chrome not reachable</h3>
<pre><code>WebDriverException: Message: chrome not reachable
</code></pre>
<p><code>driver.quit</code> で閉じてないことによってリソース負荷の問題ぽかった。</p>
<p>ここのコメントの「タブが開きすぎ」ってのでパッと来た。</p>
<ul>
<li><a href="https://stackoverflow.com/questions/28364012/webdriver-exception-chrome-not-reachable">docker &#8211; Webdriver exception: &#8220;chrome not reachable&#8221; &#8211; Stack Overflow</a></li>
</ul>
<h3>画像のサイズが大きすぎるので調整する</h3>
<pre><code>︙
# resize the window and take a screenshot
driver.manage.window.resize_to(1280, 800)src = driver.screenshot_as(:base64)
driver.quit
image = Magick::Image.from_blob(Base64.decode64(src)).firstnew_src = image.change_geometry!('372x248') do |cols, rows, img|
    img.resize(cols, rows)
end
return 'data:image/png;base64,' + Base64.encode64(new_src.to_blob)
</code></pre>
<ul>
<li>でかいサイズでキャプチャした画像をRMagickでリサイズする。</li>
<li>Base64に再エンコードして返す。</li>
</ul>
<h2>参考サイト</h2>
<ul>
<li><a href="http://tbpgr.hatenablog.com/entry/20130612/1371053897">Ruby | WatirでWebの画面キャプチャを自動取得 &#8211; Tbpgr Blog</a></li>
<li><a href="https://ja.stackoverflow.com/questions/9679/ruby%E3%81%A7%E3%82%B5%E3%83%A0%E3%83%8D%E3%82%A4%E3%83%AB%E7%94%BB%E5%83%8F%E3%81%AE%E5%8F%96%E5%BE%97%E6%96%B9%E6%B3%95">ruby on rails &#8211; Rubyでサムネイル画像の取得方法 &#8211; スタック・オーバーフロー</a></li>
<li><a href="https://stackoverflow.com/questions/2442248/basic-image-resizing-in-ruby-on-rails">Basic image resizing in Ruby on Rails &#8211; Stack Overflow</a></li>
<li><a href="https://www.rubydoc.info/gems/rmagick/Magick/Image">Class: Magick::Image — Documentation for rmagick (4.0.0)</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">162</post-id>	</item>
		<item>
		<title>[rails] migrationファイルを編集してdb:resetしても反映しない</title>
		<link>https://blog.hippohack.me/web/161</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Sun, 23 Feb 2020 21:24:58 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=161</guid>

					<description><![CDATA[カラム変更とかで毎回マイグレーションファイルをつくるのは面倒なので初期製作時のマイグレーションファイルを編集して対応していた際、schema.rbにも反映させる方法を調べた。 $ rails db:migrate:res [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>カラム変更とかで毎回マイグレーションファイルをつくるのは面倒なので初期製作時のマイグレーションファイルを編集して対応していた際、schema.rbにも反映させる方法を調べた。</p>
<pre><code>$ rails db:migrate:reset
</code></pre>
<p>すれば、schema.rbにも反映する。</p>
<p>最近は手抜きして、新規プロジェクト時はカラムの追加などがあった際は、console上からDBいじって、migrationファイルにもその変更を反映しておく。みたいなことしてる。</p>
<h2>🔍参考サイト</h2>
<ul>
<li><a href="https://opiyotan.hatenablog.com/entry/about-rails_db_reset">【Ruby on Rails】 rails db:reset だと変更/追加したmigrationファイルが反映されない！ &#8211; おぴよの気まぐれ日記</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">161</post-id>	</item>
		<item>
		<title>[rails] Vue.jsが描画するDOMが出力されない問題</title>
		<link>https://blog.hippohack.me/web/159</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Thu, 20 Feb 2020 21:32:38 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=159</guid>

					<description><![CDATA[リンクでの遷移時の回避なら、 &#60;a href="/" data-turbolinks="false"&#62;Disabled&#60;/a&#62; それだけではないので、 [app/javascript/packs/ [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>リンクでの遷移時の回避なら、</p>
<pre><code>&lt;a href="/" data-turbolinks="false"&gt;Disabled&lt;/a&gt;
</code></pre>
<p>それだけではないので、</p>
<p><em class="file-name">[app/javascript/packs/bookmark.js]</em></p>
<pre><code>document.addEventListener('DOMContentLoaded', () =&gt; {
// document.addEventListener('turbolinks:load', () =&gt; {
</code></pre>
<p>イベントリスナー、turbolinks:load やめた。</p>
<h2>🔍参考サイト</h2>
<ul>
<li><a href="https://github.com/turbolinks/turbolinks#opting-out-of-caching">turbolinks/turbolinks: Turbolinks makes navigating your web application faster</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">159</post-id>	</item>
		<item>
		<title>[rails] link_toによく追加する:confirmを自前で</title>
		<link>https://blog.hippohack.me/web/157</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Wed, 19 Feb 2020 21:23:25 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=157</guid>

					<description><![CDATA[link_to自体では何もアクションしない処理で、vueのメソッドを読んでいるのでrailsのヘルパー機能では意図した挙動にならない。 なので自前で処理する。 &#60;%= link_to 'Delete histori [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>link_to自体では何もアクションしない処理で、vueのメソッドを読んでいるのでrailsのヘルパー機能では意図した挙動にならない。</p>
<p>なので自前で処理する。</p>
<pre><code>&lt;%= link_to 'Delete histories', 'javascript:void(0)', { class: "btn btn-danger btn-sm", '@click': 'submit_delete_histories_form' } %&gt;
</code></pre>
<p><em class="file-name">hoge.vue</em></p>
<pre><code>submit_delete_histories_form() {
  var res = confirm('Are you sure?')
  if (res) {
    document.querySelector('#delete-histories-form').submit();
  }
}
</code></pre>
<h2>🔍参考サイト</h2>
<ul>
<li><a href="https://javascript.info/alert-prompt-confirm">Interaction: alert, prompt, confirm</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">157</post-id>	</item>
		<item>
		<title>[Rails] サーバが落ちたときにPumaが自動起動しない問題</title>
		<link>https://blog.hippohack.me/web/147</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Thu, 13 Feb 2020 22:00:48 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=147</guid>

					<description><![CDATA[いつものpid（プロセス）が残ることによってA server is already running.で立ち上がらない問題に対応する。 docker-compose up で立ち上げ時にpidを消しにいくのがいいかなーとか [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>いつものpid（プロセス）が残ることによって<code>A server is already running.</code>で立ち上がらない問題に対応する。</p>
<p><code>docker-compose up</code> で立ち上げ時にpidを消しにいくのがいいかなーとか思った。</p>
<p>同じ考えの人がいました。</p>
<ul>
<li>参考
<ul>
<li><a href="https://stackoverflow.com/questions/24627701/a-server-is-already-running-check-tmp-pids-server-pid-exiting-rails">A server is already running. Check …/tmp/pids/server.pid. Exiting &#8211; rails &#8211; Stack Overflow</a></li>
</ul>
</li>
</ul>
<p><em class="file-name">[docker-compose.yml]</em></p>
<pre><code>command: bash -c "rm -f /hoge/tmp/pids/server.pid &amp;&amp; bundle exec rails s -p 3000 -b '0.0.0.0'"
</code></pre>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">147</post-id>	</item>
	</channel>
</rss>
