<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>#Ruby on Rails &#8211; HippoBlog</title>
	<atom:link href="https://blog.hippohack.me/hashtag/rubyonrails/feed" rel="self" type="application/rss+xml" />
	<link>https://blog.hippohack.me</link>
	<description>Webé–‹ç™ºã«é–¢ã™ã‚‹å‚™å¿˜éŒ²ã‚„æ—¥ã€…ã®é›‘è¨˜ãƒ–ãƒ­ã‚°</description>
	<lastBuildDate>Sat, 21 Nov 2020 12:29:04 +0000</lastBuildDate>
	<language>ja</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.7.13</generator>

<image>
	<url>https://blog.hippohack.me/_cms/wp-content/uploads/2021/03/image.jpg</url>
	<title>#Ruby on Rails &#8211; HippoBlog</title>
	<link>https://blog.hippohack.me</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">190967550</site>	<item>
		<title>[rails] FactoryBotã§ã€Factory not registered</title>
		<link>https://blog.hippohack.me/web/173</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Sat, 21 Nov 2020 12:28:11 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=173</guid>

					<description><![CDATA[RSpecã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹éš›ã€FactoryBot.defineã§ãƒ¢ãƒ‡ãƒ«ã‚’Newã™ã‚‹éš›ã®åˆæœŸå€¤ã‚’æ±ºã‚ã¦æ¥½ã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã‹ã„ã¦ã¿ã¦ã„ãŸéš›ã« Factory not registered ã£ã¦æ€’ã‚‰ã‚ŒãŸéš›ã®ãƒ­ã‚°ã€‚ [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>RSpecã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹éš›ã€FactoryBot.defineã§ãƒ¢ãƒ‡ãƒ«ã‚’Newã™ã‚‹éš›ã®åˆæœŸå€¤ã‚’æ±ºã‚ã¦æ¥½ã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã‹ã„ã¦ã¿ã¦ã„ãŸéš›ã« <code>Factory not registered</code> ã£ã¦æ€’ã‚‰ã‚ŒãŸéš›ã®ãƒ­ã‚°ã€‚</p>
<p>æ›¸ã„ã¦ãŸã‚³ãƒ¼ãƒ‰ã€‚</p>
<pre><code># spec/factories/categories.rb

FactoryBot.define do
  factory :category do
    name { "category_name" }
    slug { "category_slug" }
  end
end
</code></pre>
<ul>
<li>category_spec.rbãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã€‚
<ul>
<li><code>category = Category.new(name: "", slug: "fuga")</code> ã‚’</li>
<li><code>category = build(:category, name: "")</code> ã«ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚</li>
</ul>
</li>
</ul>
<p>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€‚</p>
<pre><code># bundle exec rspec spec/models/category_spec.rb
FFF

Failures:

  1) Category name blankã®æ™‚ã« invalidã«ãªã‚‹
     Failure/Error: category = build(:category, name: "")

     KeyError:
       Factory not registered: "category"
</code></pre>
<p><code>Factory not registered: "category"</code> ãªã‚‹ã‚¨ãƒ©ãƒ¼ã€‚ ã©ã†ã‚‚ <code>FactoryBot.define</code> ãŒå‹•ä½œã—ã¦ãªã„ã€‚</p>
<p>ã¾ãã¾ããƒãƒã£ãŸã€‚</p>
<p>/spec/factories/ä»¥ä¸‹ã¯è‡ªå‹•ã§ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œã‚‹ã£ã¦ã„ã†ã—ãªã‚“ã ã‚ãªãƒ¼ã¨ã€‚</p>
<p>ã§èª¿ã¹ã¦ã‚‹ä¸­ã§â†“ã‚’è¦‹ã¤ã‘ãŸã€‚</p>
<ul>
<li><a href="https://stackoverflow.com/questions/17330788/factory-not-registered#17331102">ruby on rails &#8211; Factory not registered &#8211; Stack Overflow</a>
<ul>
<li><code>spec_helper.rb</code>ã§<code>require 'factory_girl'</code>ã—ã¦ã‚‹ã®ã«ç›®ãŒè¡Œã£ãŸã€‚</li>
<li>ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤ã„ãŒã‚„ã‚‹ã“ã¨ã¯ãŠãªã˜ã‹ã‚‚ï¼Ÿã¨ãŠã‚‚ã£ã¦ã€</li>
<li><code>rails_helper.rb</code> ã§ <code>require 'factory_bot_rails'</code> ã—ã¦ã¿ãŸã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34-1024x525.png" alt="img1" width="1024" height="525" class="aligncenter size-large wp-image-174" srcset="https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 1024w, https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 300w, https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 768w, https://blog.hippohack.me/_cms/wp-content/uploads/2020/11/2020-11-21-21-08-34.png 1218w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>ã§ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€‚</p>
<pre><code># bundle exec rspec spec/models/category_spec.rb
...

Finished in 0.10593 seconds (files took 3.21 seconds to load)
3 examples, 0 failures
</code></pre>
<p>ã„ã‘ãŸãƒ¼ã€‚</p>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">173</post-id>	</item>
		<item>
		<title>[rails] cssã§image_urlãŒä½¿ãˆã‚‹</title>
		<link>https://blog.hippohack.me/web/169</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Sat, 29 Feb 2020 21:22:01 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=169</guid>

					<description><![CDATA[hoge.scss .eyecatch { background: image-url("og.png") no-repeat; } ã„ã„ã‹ã‚“ã˜ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ãã‚Œã‚‹ã¿ãŸã„ã€‚ å‚è€ƒã‚µã‚¤ãƒˆ heroku &#8211; H [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><em class="file-name">hoge.scss</em></p>
<pre><code>.eyecatch {
  background: image-url("og.png") no-repeat;
}
</code></pre>
<p>ã„ã„ã‹ã‚“ã˜ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ãã‚Œã‚‹ã¿ãŸã„ã€‚</p>
<h2>å‚è€ƒã‚µã‚¤ãƒˆ</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/15257555/how-to-reference-images-in-css-within-rails-4#15591726">heroku &#8211; How to reference images in CSS within Rails 4 &#8211; Stack Overflow</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">169</post-id>	</item>
		<item>
		<title>[rails] formã‚’jsã‹ã‚‰ã‚µãƒ–ãƒŸãƒƒãƒˆã§ã¯ajaxã«ãªã‚‰ãªã„å•é¡Œã®è§£æ¶ˆ</title>
		<link>https://blog.hippohack.me/web/168</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Fri, 28 Feb 2020 21:15:48 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=168</guid>

					<description><![CDATA[ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒŸãƒƒã‚·ãƒ³ã‚°ã¨ã‹ã§ã ã„ã¶ã¯ã¾ã£ãŸã€‚ ã–ã£ãã‚Šãƒ­ã‚°ã€‚ form_forã«:remote =&#62; trueã‚’è¨­å®š submitãƒœã‚¿ãƒ³ã‚’è¨­ç½®ã›ãš file_fieldã®å¤‰æ›´ç›£è¦–ã—ã¦form.submit()ã—ã¦ãŸ [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒŸãƒƒã‚·ãƒ³ã‚°ã¨ã‹ã§ã ã„ã¶ã¯ã¾ã£ãŸã€‚</p>
<p>ã–ã£ãã‚Šãƒ­ã‚°ã€‚</p>
<ul>
<li>form_forã«<code>:remote =&gt; true</code>ã‚’è¨­å®š</li>
<li>submitãƒœã‚¿ãƒ³ã‚’è¨­ç½®ã›ãš</li>
<li>file_fieldã®å¤‰æ›´ç›£è¦–ã—ã¦form.submit()ã—ã¦ãŸãŒãã‚Œã§ã¯ajaxã§å‡¦ç†ã—ã¦ãã‚Œãªã„ã€‚</li>
<li>submitãƒœã‚¿ãƒ³ã‚’è¨­ç½®ã—ã¦éè¡¨ç¤ºã«</li>
<li>ã§ã€$(.submit).click()ã§submitã™ã‚‹ã¨ajaxã§é£›ã‚“ã ã€‚</li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">168</post-id>	</item>
		<item>
		<title>[rails] Delayed Jobã§éåŒæœŸå‡¦ç†</title>
		<link>https://blog.hippohack.me/web/167</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Thu, 27 Feb 2020 21:43:57 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=167</guid>

					<description><![CDATA[å€‹äººé–‹ç™ºWebã‚¢ãƒ—ãƒªã®HippoMarksã§ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ç”»åƒã‚’å–å¾—ã™ã‚‹å‡¦ç†ã‚’éåŒæœŸã§å‡¦ç†ã™ã¹ãã€Delayed Jobã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚ å‚è€ƒ collectiveidea/delayed_job: Database bas [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>å€‹äººé–‹ç™ºWebã‚¢ãƒ—ãƒªã®<a href="https://bookmarks.hippohack.me">HippoMarks</a>ã§ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ç”»åƒã‚’å–å¾—ã™ã‚‹å‡¦ç†ã‚’éåŒæœŸã§å‡¦ç†ã™ã¹ãã€Delayed Jobã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚</p>
<ul>
<li>å‚è€ƒ
<ul>
<li><a href="https://github.com/collectiveidea/delayed_job/">collectiveidea/delayed_job: Database based asynchronous priority queue system &#8212; Extracted from Shopify</a></li>
</ul>
</li>
</ul>
<h2>æº–å‚™</h2>
<p><em class="file-name">Gemfile</em></p>
<pre><code>gem 'daemons'
gem 'delayed_job_active_record'
</code></pre>
<p><em class="file-name">bash</em></p>
<pre><code># gem install
bundle install

# make necesarry files
rails g delayed_job:active_record

# make tables
rails db:migrate
</code></pre>
<h2>æœ‰åŠ¹åŒ–</h2>
<p><em class="file-name">config/application.rb</em></p>
<pre><code>module Bookmarks
    class Application &lt; Rails::Application
        config.active_job.queue_adapter = :delayed_job
        ï¸™
    end
end
</code></pre>
<h2>jobã®ä½œæˆ</h2>
<pre><code>$ rails g job Capture
Running via Spring preloader in process 2177
      invoke  rspec
      create    spec/jobs/capture_job_spec.rb
      create  app/jobs/capture_job.rb
</code></pre>
<h2>ä½œæˆã•ã‚ŒãŸJobã®ç·¨é›†</h2>
<p><em class="file-name">app/job/capture_job.rb</em></p>
<pre><code>class CaptureJob &lt; ApplicationJob
  queue_as :default


  def perform(*args)
    # Do something later
  end
end
</code></pre>
<ul>
<li>å®Ÿå‡¦ç†ã‚’ã‚ã‚‰ã‚ã™ã®ã¯ performãƒ¡ã‚½ãƒƒãƒ‰ã®å½¹å‰²</li>
<li>ãƒ¡ã‚½ãƒƒãƒ‰é…ä¸‹ã«éåŒæœŸå‡¦ç†ã‚’æ›¸ã</li>
<li>ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å¿…è¦ãªå€¤ã¯å¼•æ•°ã§æ¸¡ã™</li>
</ul>
<h2>å®Ÿè¡Œ</h2>
<p>ã“ã“ã§ã¯æ›¸ã„ã¦ãªã„ã§ã™ãŒã€<code>/config/initializers/delayed_job.rb</code> ã‚’ä½œæˆã—ã¦è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã€‚</p>
<p>è©³ã—ãã¯ã“ã®ã¸ã‚“å‚è€ƒã«ã€‚</p>
<ul>
<li><a href="https://github.com/collectiveidea/delayed_job/#gory-details">collectiveidea/delayed_job: Database based asynchronous priority queue system &#8212; Extracted from Shopify</a></li>
</ul>
<p><em class="file-name">bash</em></p>
<pre><code># ruby bin/delayed_job start
</code></pre>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">167</post-id>	</item>
		<item>
		<title>[rails] open-uriãŒ404ã‚¨ãƒ©ãƒ¼ã§ãƒ©ã‚¤ã‚ºã—ã¦ã—ã¾ã†å•é¡Œ</title>
		<link>https://blog.hippohack.me/web/164</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Tue, 25 Feb 2020 21:25:31 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=164</guid>

					<description><![CDATA[ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©ã—ã¦ãã‚Œã‚’å‘¼ã¶ã“ã¨ã«ã™ã‚‹ã€‚ ã¤ã„ã§ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæ‹’å¦ã‚‚è¿½åŠ ã€‚ model # doc = Nokogiri::HTML(self.open(url)) doc = Nokogiri::HTML(self.sa [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><img src="https://blog.hippohack.me/_cms/wp-content/uploads/2020/02/BE6B75A9-8F5B-483C-B720-EF8795C5523A.png" alt="enter image description here" /></p>
<p>ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©ã—ã¦ãã‚Œã‚’å‘¼ã¶ã“ã¨ã«ã™ã‚‹ã€‚</p>
<p>ã¤ã„ã§ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæ‹’å¦ã‚‚è¿½åŠ ã€‚</p>
<p><em class="file-name">model</em></p>
<pre><code># doc = Nokogiri::HTML(self.open(url))
doc = Nokogiri::HTML(self.safe_open(url))
</code></pre>
<p><em class="file-name">model</em></p>
<pre><code>def self.safe_open(url)
    begin
        OpenURI.open_uri(url, redirect: false) { |io|
            return io.read
        }
    rescue =&gt; e        
        puts e # ä¾‹å¤–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    end
end
</code></pre>
<h2>å‚è€ƒã‚µã‚¤ãƒˆ</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/31975363/how-to-rescue-404s-from-openuri-in-a-map">ruby on rails &#8211; How to rescue 404s from OpenURI in a map &#8211; Stack Overflow</a></li>
<li><a href="https://keruuweb.com/ruby-openuri%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9/">Ruby OpenURIã®ä½¿ã„æ–¹ | | KeruuWeb</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">164</post-id>	</item>
		<item>
		<title>[rails] OGç”»åƒURLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ»ãªã„ã¨ãã¯ã‚­ãƒ£ãƒ—ãƒãƒ£å–ã‚‹ï¼ˆã®ä½œæ¥­ãƒ­ã‚°ï¼‰</title>
		<link>https://blog.hippohack.me/web/162</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Mon, 24 Feb 2020 21:38:53 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=162</guid>

					<description><![CDATA[OGç”»åƒURLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° Nokogiriã§ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã€‚ og:image ã ã£ãŸã‚Šã€og:image:url ã ã£ãŸã‚Šã™ã‚‹ã®ã§2é‡ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‹ã€‚ ã§ã€ã©ã£ã¡ã‚‚ãªã„ã¨ãã¯ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’å–ã‚‹ã€‚ doc = Noko [&#8230;]]]></description>
										<content:encoded><![CDATA[<h2>OGç”»åƒURLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°</h2>
<p>Nokogiriã§ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã€‚</p>
<p><code>og:image</code> ã ã£ãŸã‚Šã€<code>og:image:url</code> ã ã£ãŸã‚Šã™ã‚‹ã®ã§2é‡ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‹ã€‚</p>
<p>ã§ã€ã©ã£ã¡ã‚‚ãªã„ã¨ãã¯ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’å–ã‚‹ã€‚</p>
<pre><code>doc = Nokogiri::HTML(open(url))

og_image_url = doc.xpath('/html/head/meta[@property="og:image"]/@content').to_s
og_image_url = doc.xpath('/html/head/meta[@property="og:image:url"]/@content').to_s if og_image_url.blank?
</code></pre>
<h2>ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’å–ã‚‹</h2>
<p>Watir ã‚’ä½¿ã†ã€‚</p>
<ul>
<li>å‚è€ƒ
<ul>
<li><a href="http://watir.com/guides/form-example/">Watir Example &#8211; Form Filling â€“ Watir Project</a></li>
<li><a href="http://watir.com/guides/chrome/#headless">Chrome â€“ Watir Project</a></li>
</ul>
</li>
</ul>
<p><em class="file-name">[Gemfile]</em></p>
<pre><code>gem 'watir'
gem 'headless'
gem 'webdrivers'
gem 'faker'
</code></pre>
<p><code>bundle install</code> ã™ã‚‹ã€‚</p>
<p>Headlessã§ã‚¨ãƒ©ãƒ¼ã€‚</p>
<pre><code>Headless::Exception (Xvfb not found on your system)
</code></pre>
<p>Xvfbã¯Linuxã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‰ã—ã„ã€‚</p>
<p>dockerfileã‚’ç·¨é›†ã—ã¦ã„ã‚Œã‚‹ã€‚</p>
<p><em class="file-name">[dockerfile]</em></p>
<pre><code>ï¸™
RUN apt-get update &amp;&amp; apt-get install -y build-essential libpq-dev tmux xvfb
ï¸™
</code></pre>
<p><code>Watir::Browser.new :chrome, headless: true</code> ã§ã‚¨ãƒ©ãƒ¼ã€‚</p>
<p><code>Webdrivers::BrowserNotFound (Failed to find Chrome binary.)</code></p>
<pre><code>Selenium::WebDriver::Error::UnknownError (unknown error: Chrome failed to start: exited abnormally)
  (unknown error: DevToolsActivePort file doesn't exist)
  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)
</code></pre>
<p>chromeã®ãƒã‚¤ãƒŠãƒªå…¥ã‚Œãªã„ã¨ã„ã‘ãªã„ã¿ãŸã„ã€‚</p>
<ul>
<li>å‚è€ƒ
<ul>
<li><a href="https://askubuntu.com/questions/510056/how-to-install-google-chrome">software installation &#8211; How to install Google Chrome &#8211; Ask Ubuntu</a></li>
<li><a href="https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/">How to Setup Selenium with ChromeDriver on Ubuntu 18.04 &amp; 16.04 â€“ TecAdmin</a></li>
</ul>
</li>
</ul>
<p><em class="file-name">[dockerfile]</em></p>
<pre><code>ï¸™
# install google-chrome-stable
RUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -RUN echo 'deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main' | tee /etc/apt/sources.list.d/google-chrome.listRUN apt-get update &amp;&amp; apt-get install -y google-chrome-stable

RUN wget https://chromedriver.storage.googleapis.com/2.41/chromedriver_linux64.zip &amp;&amp; unzip chromedriver_linux64.zipRUN mv chromedriver /usr/bin/chromedriver &amp;&amp; chown root:root /usr/bin/chromedriver &amp;&amp; chmod +x /usr/bin/chromedriver
ï¸™
</code></pre>
<p>ã§ã¯ã€è§£æ±ºã›ãšã€‚</p>
<p>webdriverã®ä½¿ã„æ–¹ãƒŸã‚¹ã£ã¦ãŸã‹ã‚‚ã€‚</p>
<ul>
<li>å‚è€ƒ
<ul>
<li><a href="https://github.com/titusfortner/webdrivers">titusfortner/webdrivers: Keep your Selenium WebDrivers updated automatically</a></li>
</ul>
</li>
</ul>
<p>ã„ã‚„ãƒ¼ã€ã§ã‚‚è§£æ±ºã›ãšã€‚</p>
<h3>ä¸€æ—¦ãƒªã‚»ãƒƒãƒˆã€‚Watirã‚’æ¨ã¦ã‚‹ã€‚</h3>
<p>ç´”ç²‹ã«selenium-webdriverã§ã„ã‘ã‚‹ï¼Ÿ</p>
<ul>
<li>å‚è€ƒ
<ul>
<li><a href="https://stackoverflow.com/questions/44424200/how-do-i-use-selenium-webdriver-on-headless-chrome">ruby &#8211; How do I use Selenium Webdriver on headless Chrome? &#8211; Stack Overflow</a></li>
</ul>
</li>
</ul>
<p>ã¾ãŸã€<code>Webdrivers::BrowserNotFound (Failed to find Chrome binary.)</code></p>
<p>â†‘ã®dockerfileã®ä¿®æ­£ã§<code>google-chrome-stable</code>ã‚‚ã£ã‹ã„å…¥ã‚ŒãŸã€‚</p>
<pre><code># which google-chrome
/usr/bin/google-chrome
</code></pre>
<p>çµæœãŠãªã˜ã‚¨ãƒ©ãƒ¼ã€‚ã€‚</p>
<pre><code>Selenium::WebDriver::Error::UnknownError (unknown error: Chrome failed to start: exited abnormally)
  (unknown error: DevToolsActivePort file doesn't exist)
  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)
</code></pre>
<p>ãƒ‘ã‚¹ã®è¨­å®šè¦—ã„ã¦ã¿ã‚‹</p>
<pre><code>Selenium::WebDriver::Chrome.driver_path
2019-08-29 04:37:05 WARN Selenium [DEPRECATION] Selenium::WebDriver::Chrome#driver_path is deprecated. Use Selenium::WebDriver::Chrome::Service#driver_path instead.
=&gt; #&lt;Proc:0x000055e90596c0a0@/usr/local/bundle/gems/webdrivers-4.1.2/lib/webdrivers/chromedriver.rb:119&gt;
</code></pre>
<p>ã‚ã‚“ã˜ã‚ƒã‚“ã€‚ã‚“ãƒ¼ã€‚ã€‚ã€‚</p>
<p>chromedriverå…¥ã‚Œã¦ã¿ã‚‹ã€‚</p>
<ul>
<li>
<p>å‚è€ƒ</p>
<ul>
<li><a href="https://qiita.com/nishina555/items/f08b2a94d9bf03a524b7">Dockerã§ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ç’°å¢ƒæ§‹ç¯‰æ‰‹é † &#8211; Qiita</a></li>
</ul>
<p>dockerfile: è¿”ã‚Šå€¤ã‚’å¤‰æ•°ã«å…¥ã‚ŒãŸã„ã€‚</p>
</li>
<li>
<p>å‚è€ƒ</p>
<ul>
<li><a href="https://www.ted027.com/post/docker-var/">Dockerã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œçµæœã‚’å¤‰æ•°ã«å…¥ã‚Œã‚‰ã‚Œãªãã¦å›°ã£ãŸè©± &#8211; è¡Œã‘ãŸã‚‰è¡Œã</a></li>
</ul>
</li>
</ul>
<p>ã ã‚ã ã€ã¨ã‚Šã‚ãˆãšãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€‚</p>
<p><em class="file-name">[dockerfile]</em></p>
<pre><code>ENV CHROME_DRIVER_VERSION 76.0.3809.126

# ENV CHROME_DRIVER_VERSION=`curl -sS chromedriver.storage.googleapis.com/LATEST_RELEASE`
RUN wget -N http://chromedriver.storage.googleapis.com/$CHROME_DRIVER_VERSION/chromedriver_linux64.zip

RUN unzip chromedriver_linux64.zip &amp;&amp; rm chromedriver_linux64.zip

RUN mv chromedriver /usr/local/bin/
</code></pre>
<p>ç¢ºèªã€‚</p>
<pre><code># which chromedriver
/usr/local/bin/chromedriver
</code></pre>
<p><em class="file-name">[module]</em></p>
<pre><code>def get_screenshot(url)
  # configure the driver to run in headless mode
  options = Selenium::WebDriver::Chrome::Options.new
  options.add_argument('--headless')
  options.add_argument('--no-sandbox')
  options.add_argument('--disable-gpu')
  driver = Selenium::WebDriver.for :chrome, options: options
  driver.navigate.to url
  # resize the window and take a screenshot
  driver.manage.window.resize_to(372, 248)
  src = 'data:image/png;base64,' + driver.screenshot_as(:base64)
  # driver.save_screenshot "screenshot.png"
  driver.quit
  src
end
</code></pre>
<p>ã§ã€ã„ã‘ãŸãƒ¼ã€‚</p>
<p>ã‘ã©ã€ <code>Net::ReadTimeout with #&lt;TCPSocket:(closed)&gt;</code> ã¨ã‹å‡ºã‚‹ã€‚ â†’ ä¾‹å¤–å‡¦ç†ã§å›é¿ã€‚</p>
<h3>ã‚¨ãƒ©ãƒ¼ï¼š chrome not reachable</h3>
<pre><code>WebDriverException: Message: chrome not reachable
</code></pre>
<p><code>driver.quit</code> ã§é–‰ã˜ã¦ãªã„ã“ã¨ã«ã‚ˆã£ã¦ãƒªã‚½ãƒ¼ã‚¹è² è·ã®å•é¡Œã½ã‹ã£ãŸã€‚</p>
<p>ã“ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã®ã€Œã‚¿ãƒ–ãŒé–‹ãã™ãã€ã£ã¦ã®ã§ãƒ‘ãƒƒã¨æ¥ãŸã€‚</p>
<ul>
<li><a href="https://stackoverflow.com/questions/28364012/webdriver-exception-chrome-not-reachable">docker &#8211; Webdriver exception: &#8220;chrome not reachable&#8221; &#8211; Stack Overflow</a></li>
</ul>
<h3>ç”»åƒã®ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã‚‹ã®ã§èª¿æ•´ã™ã‚‹</h3>
<pre><code>ï¸™
# resize the window and take a screenshot
driver.manage.window.resize_to(1280, 800)src = driver.screenshot_as(:base64)
driver.quit
image = Magick::Image.from_blob(Base64.decode64(src)).firstnew_src = image.change_geometry!('372x248') do |cols, rows, img|
    img.resize(cols, rows)
end
return 'data:image/png;base64,' + Base64.encode64(new_src.to_blob)
</code></pre>
<ul>
<li>ã§ã‹ã„ã‚µã‚¤ã‚ºã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸç”»åƒã‚’RMagickã§ãƒªã‚µã‚¤ã‚ºã™ã‚‹ã€‚</li>
<li>Base64ã«å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦è¿”ã™ã€‚</li>
</ul>
<h2>å‚è€ƒã‚µã‚¤ãƒˆ</h2>
<ul>
<li><a href="http://tbpgr.hatenablog.com/entry/20130612/1371053897">Ruby | Watirã§Webã®ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’è‡ªå‹•å–å¾— &#8211; Tbpgr Blog</a></li>
<li><a href="https://ja.stackoverflow.com/questions/9679/ruby%E3%81%A7%E3%82%B5%E3%83%A0%E3%83%8D%E3%82%A4%E3%83%AB%E7%94%BB%E5%83%8F%E3%81%AE%E5%8F%96%E5%BE%97%E6%96%B9%E6%B3%95">ruby on rails &#8211; Rubyã§ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®å–å¾—æ–¹æ³• &#8211; ã‚¹ã‚¿ãƒƒã‚¯ãƒ»ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼</a></li>
<li><a href="https://stackoverflow.com/questions/2442248/basic-image-resizing-in-ruby-on-rails">Basic image resizing in Ruby on Rails &#8211; Stack Overflow</a></li>
<li><a href="https://www.rubydoc.info/gems/rmagick/Magick/Image">Class: Magick::Image â€” Documentation for rmagick (4.0.0)</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">162</post-id>	</item>
		<item>
		<title>[rails] migrationãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦db:resetã—ã¦ã‚‚åæ˜ ã—ãªã„</title>
		<link>https://blog.hippohack.me/web/161</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Sun, 23 Feb 2020 21:24:58 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=161</guid>

					<description><![CDATA[ã‚«ãƒ©ãƒ å¤‰æ›´ã¨ã‹ã§æ¯å›ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¤ãã‚‹ã®ã¯é¢å€’ãªã®ã§åˆæœŸè£½ä½œæ™‚ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦å¯¾å¿œã—ã¦ã„ãŸéš›ã€schema.rbã«ã‚‚åæ˜ ã•ã›ã‚‹æ–¹æ³•ã‚’èª¿ã¹ãŸã€‚ $ rails db:migrate:res [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>ã‚«ãƒ©ãƒ å¤‰æ›´ã¨ã‹ã§æ¯å›ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¤ãã‚‹ã®ã¯é¢å€’ãªã®ã§åˆæœŸè£½ä½œæ™‚ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦å¯¾å¿œã—ã¦ã„ãŸéš›ã€schema.rbã«ã‚‚åæ˜ ã•ã›ã‚‹æ–¹æ³•ã‚’èª¿ã¹ãŸã€‚</p>
<pre><code>$ rails db:migrate:reset
</code></pre>
<p>ã™ã‚Œã°ã€schema.rbã«ã‚‚åæ˜ ã™ã‚‹ã€‚</p>
<p>æœ€è¿‘ã¯æ‰‹æŠœãã—ã¦ã€æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ™‚ã¯ã‚«ãƒ©ãƒ ã®è¿½åŠ ãªã©ãŒã‚ã£ãŸéš›ã¯ã€consoleä¸Šã‹ã‚‰DBã„ã˜ã£ã¦ã€migrationãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚‚ãã®å¤‰æ›´ã‚’åæ˜ ã—ã¦ãŠãã€‚ã¿ãŸã„ãªã“ã¨ã—ã¦ã‚‹ã€‚</p>
<h2>ğŸ”å‚è€ƒã‚µã‚¤ãƒˆ</h2>
<ul>
<li><a href="https://opiyotan.hatenablog.com/entry/about-rails_db_reset">ã€Ruby on Railsã€‘ rails db:reset ã ã¨å¤‰æ›´/è¿½åŠ ã—ãŸmigrationãƒ•ã‚¡ã‚¤ãƒ«ãŒåæ˜ ã•ã‚Œãªã„ï¼ &#8211; ãŠã´ã‚ˆã®æ°—ã¾ãã‚Œæ—¥è¨˜</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">161</post-id>	</item>
		<item>
		<title>[rails] Vue.jsãŒæç”»ã™ã‚‹DOMãŒå‡ºåŠ›ã•ã‚Œãªã„å•é¡Œ</title>
		<link>https://blog.hippohack.me/web/159</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Thu, 20 Feb 2020 21:32:38 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=159</guid>

					<description><![CDATA[ãƒªãƒ³ã‚¯ã§ã®é·ç§»æ™‚ã®å›é¿ãªã‚‰ã€ &#60;a href="/" data-turbolinks="false"&#62;Disabled&#60;/a&#62; ãã‚Œã ã‘ã§ã¯ãªã„ã®ã§ã€ [app/javascript/packs/ [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>ãƒªãƒ³ã‚¯ã§ã®é·ç§»æ™‚ã®å›é¿ãªã‚‰ã€</p>
<pre><code>&lt;a href="/" data-turbolinks="false"&gt;Disabled&lt;/a&gt;
</code></pre>
<p>ãã‚Œã ã‘ã§ã¯ãªã„ã®ã§ã€</p>
<p><em class="file-name">[app/javascript/packs/bookmark.js]</em></p>
<pre><code>document.addEventListener('DOMContentLoaded', () =&gt; {
// document.addEventListener('turbolinks:load', () =&gt; {
</code></pre>
<p>ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã€turbolinks:load ã‚„ã‚ãŸã€‚</p>
<h2>ğŸ”å‚è€ƒã‚µã‚¤ãƒˆ</h2>
<ul>
<li><a href="https://github.com/turbolinks/turbolinks#opting-out-of-caching">turbolinks/turbolinks: Turbolinks makes navigating your web application faster</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">159</post-id>	</item>
		<item>
		<title>[rails] link_toã«ã‚ˆãè¿½åŠ ã™ã‚‹:confirmã‚’è‡ªå‰ã§</title>
		<link>https://blog.hippohack.me/web/157</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Wed, 19 Feb 2020 21:23:25 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=157</guid>

					<description><![CDATA[link_toè‡ªä½“ã§ã¯ä½•ã‚‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ãªã„å‡¦ç†ã§ã€vueã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’èª­ã‚“ã§ã„ã‚‹ã®ã§railsã®ãƒ˜ãƒ«ãƒ‘ãƒ¼æ©Ÿèƒ½ã§ã¯æ„å›³ã—ãŸæŒ™å‹•ã«ãªã‚‰ãªã„ã€‚ ãªã®ã§è‡ªå‰ã§å‡¦ç†ã™ã‚‹ã€‚ &#60;%= link_to 'Delete histori [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>link_toè‡ªä½“ã§ã¯ä½•ã‚‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ãªã„å‡¦ç†ã§ã€vueã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’èª­ã‚“ã§ã„ã‚‹ã®ã§railsã®ãƒ˜ãƒ«ãƒ‘ãƒ¼æ©Ÿèƒ½ã§ã¯æ„å›³ã—ãŸæŒ™å‹•ã«ãªã‚‰ãªã„ã€‚</p>
<p>ãªã®ã§è‡ªå‰ã§å‡¦ç†ã™ã‚‹ã€‚</p>
<pre><code>&lt;%= link_to 'Delete histories', 'javascript:void(0)', { class: "btn btn-danger btn-sm", '@click': 'submit_delete_histories_form' } %&gt;
</code></pre>
<p><em class="file-name">hoge.vue</em></p>
<pre><code>submit_delete_histories_form() {
  var res = confirm('Are you sure?')
  if (res) {
    document.querySelector('#delete-histories-form').submit();
  }
}
</code></pre>
<h2>ğŸ”å‚è€ƒã‚µã‚¤ãƒˆ</h2>
<ul>
<li><a href="https://javascript.info/alert-prompt-confirm">Interaction: alert, prompt, confirm</a></li>
</ul>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">157</post-id>	</item>
		<item>
		<title>[Rails] ã‚µãƒ¼ãƒãŒè½ã¡ãŸã¨ãã«PumaãŒè‡ªå‹•èµ·å‹•ã—ãªã„å•é¡Œ</title>
		<link>https://blog.hippohack.me/web/147</link>
		
		<dc:creator><![CDATA[@hippohack]]></dc:creator>
		<pubDate>Thu, 13 Feb 2020 22:00:48 +0000</pubDate>
				<guid isPermaLink="false">https://blog.hippohack.me/?post_type=web&#038;p=147</guid>

					<description><![CDATA[ã„ã¤ã‚‚ã®pidï¼ˆãƒ—ãƒ­ã‚»ã‚¹ï¼‰ãŒæ®‹ã‚‹ã“ã¨ã«ã‚ˆã£ã¦A server is already running.ã§ç«‹ã¡ä¸ŠãŒã‚‰ãªã„å•é¡Œã«å¯¾å¿œã™ã‚‹ã€‚ docker-compose up ã§ç«‹ã¡ä¸Šã’æ™‚ã«pidã‚’æ¶ˆã—ã«ã„ãã®ãŒã„ã„ã‹ãªãƒ¼ã¨ã‹ [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>ã„ã¤ã‚‚ã®pidï¼ˆãƒ—ãƒ­ã‚»ã‚¹ï¼‰ãŒæ®‹ã‚‹ã“ã¨ã«ã‚ˆã£ã¦<code>A server is already running.</code>ã§ç«‹ã¡ä¸ŠãŒã‚‰ãªã„å•é¡Œã«å¯¾å¿œã™ã‚‹ã€‚</p>
<p><code>docker-compose up</code> ã§ç«‹ã¡ä¸Šã’æ™‚ã«pidã‚’æ¶ˆã—ã«ã„ãã®ãŒã„ã„ã‹ãªãƒ¼ã¨ã‹æ€ã£ãŸã€‚</p>
<p>åŒã˜è€ƒãˆã®äººãŒã„ã¾ã—ãŸã€‚</p>
<ul>
<li>å‚è€ƒ
<ul>
<li><a href="https://stackoverflow.com/questions/24627701/a-server-is-already-running-check-tmp-pids-server-pid-exiting-rails">A server is already running. Check â€¦/tmp/pids/server.pid. Exiting &#8211; rails &#8211; Stack Overflow</a></li>
</ul>
</li>
</ul>
<p><em class="file-name">[docker-compose.yml]</em></p>
<pre><code>command: bash -c "rm -f /hoge/tmp/pids/server.pid &amp;&amp; bundle exec rails s -p 3000 -b '0.0.0.0'"
</code></pre>
]]></content:encoded>
					
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">147</post-id>	</item>
	</channel>
</rss>
